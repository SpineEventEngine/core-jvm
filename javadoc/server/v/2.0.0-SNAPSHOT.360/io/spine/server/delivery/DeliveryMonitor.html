<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en"><head>
    <title>DeliveryMonitor 2.0.0-SNAPSHOT.360 API </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="dc.created" content="2020-03-25">
    <link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
    <link rel="stylesheet" type="text/css" href="../../../../dokka-javadoc-stylesheet.css" title="Style">
    <link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
    <script type="text/javascript" src="../../../../jquery/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../../../../jquery/jquery-migrate-3.4.0.min.js"></script>
    <script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>

    <script type="text/javascript" src="../../../../search.js"></script>
    <script async type="text/javascript" src="../../../../module-search-index.js"></script>
    <script async type="text/javascript" src="../../../../package-search-index.js"></script>
    <script async type="text/javascript" src="../../../../type-search-index.js"></script>
    <script async type="text/javascript" src="../../../../member-search-index.js"></script>
    <script async type="text/javascript" src="../../../../tag-search-index.js"></script>
</head><body>
<script type="text/javascript">
var pathtoroot = "../../../../";
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript><header role="banner">
    <nav role="navigation">
        <div class="fixedNav">
            <!-- ========= START OF TOP NAVBAR ======= -->
            <div class="topNav"><a id="navbar.top">
                <!--   -->
            </a>
                <div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a>
                </div>
                <a id="navbar.top.firstrow">
                    <!--   -->
                </a>
                <ul class="navList" title="Navigation">
    <li><a href="../../../../index.html">Overview</a></li>
    
    <li><a href="package-summary.html">Package</a></li>
    
    <li class="navBarCell1Rev">Class</li>
    
    <li><a href="package-tree.html">Tree</a></li>
    
    <li><a href="../../../../deprecated.html">Deprecated</a></li>
    <li><a href="../../../../index-files/index-1.html">Index</a></li>
    <li>Help</li>
</ul></div>
            <div class="subNav">
<ul class="navList" id="allclasses_navbar_top" style="display: block;">
    <li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>

<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" class="ui-autocomplete-input" autocomplete="off" placeholder="Search">
<input type="reset" id="reset" value="reset">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div><!-- ========= END OF TOP NAVBAR ========= -->
        </div>
        <div class="navPadding">&nbsp;</div>
        <script type="text/javascript"><!--
        $('.navPadding').css('padding-top', $('.fixedNav').css("height"));
        //-->
        </script>
    </nav>
</header>

<main role="main">
    <div class="header">
        <div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">io.spine.server.delivery</a></div>
        <h2 title="Class DeliveryMonitor" class="title">Class DeliveryMonitor</h2>
    </div>
    <div class="contentContainer">
        <!-- <ul class="inheritance">
            <li>java.lang.Object</li>
            <li>
                <ul class="inheritance">
                    <li>adaptation.Adaptation</li>
                </ul>
            </li>
        </ul> TODO inheritance tree -->
        <div class="description">
            <ul class="blockList">
                <li class="blockList">
                    
                    <dl>
                        <dt>All Implemented Interfaces:</dt>
                        <dd>
                            
                        </dd>
                    </dl>
                    
                    <hr>
                    <pre class="wrap-overflow">
@SPI() 
public class <span class="typeNameLabel"><a href=DeliveryMonitor.html>DeliveryMonitor</a></span>

                    </pre>
                    <div class="block"><p>A controlling monitor of an <a href=Delivery.html>Inbox Delivery</a> process. </p><p>In some cases when a funnel-like <code>Entity</code> (e.g. some projection of a business report subscribed to half of the domain events) has a lot of messages in its <code>Inbox</code>, the delivery process may be slowed down for other targets in the same shard, while all the messages are being dispatched the &quot;busy&quot; <code>Entity</code>. Depending on the number of messages to deliver, it may take a lot of time. </p><p>Environments such as Google AppEngine Standard imply restrictions on the duration of the request processing. Therefore, it may be necessary to stop the message delivery for this shard at some point, and re-schedule the shard processing again by sending another request and thus resetting the processing clock.</p></div>

                    <dl>

                    

                    

                    </dl>
                </li>
            </ul>
        </div>
        <div class="summary">
            <ul class="blockList">
                <li class="blockList">
                <!-- ======== NESTED CLASS SUMMARY ======== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="nested.class.summary">
                                <!--   -->
                            </a>
                                <h3>Nested Class Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tr>
                                            <th class="colFirst" scope="col">Modifier and Type</th>
                                            <th class="colSecond" scope="col">Class</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- =========== FIELD SUMMARY =========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="field.summary">
                                <!--   -->
                            </a>
                                <h3>Field Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tr>
                                            <th class="colFirst" scope="col">Modifier and Type</th>
                                            <th class="colSecond" scope="col">Field</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- ======== CONSTRUCTOR SUMMARY ======== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.summary">
                                <!--   -->
                            </a>
                                <h3>Constructor Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tbody>
                                        <tr>
                                            <th class="colFirst" scope="col">Constructor</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>

                                        
                                            <tr class="altColor">
                                                <th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a
                                                        href="#DeliveryMonitor()">DeliveryMonitor</a></span>()</code></th>
                                                <td class="colLast"></td>
                                            </tr>
                                        

                                        </tbody>
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- =========== ENUM CONSTANT SUMMARY =========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="enum.constant.summary">
                                <!--   -->
                            </a>
                                <h3>Enum Constant Summary</h3>
                                <table class="memberSummary">
                                    <caption><span>Enum Constants</span><span class="tabEnd">&nbsp;</span></caption>
                                    <tr>
                                        <th class="colFirst" scope="col">Enum Constant</th>
                                        <th class="colLast" scope="col">Description</th>
                                    </tr>
                                    
                                </table>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- ========== METHOD SUMMARY =========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.summary">
                                <!--   -->
                            </a>
                                <h3>Method Summary</h3>
                                <div class="memberSummary">
                                    <div role="tablist" aria-orientation="horizontal">
                                        <button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button>
                                        <!-- TODO: Instance and Concrete Methods #1118 -->
                                    </div>
                                    <div id="memberSummary_tabpanel" role="tabpanel">
                                    <table aria-labelledby="t0">
                                        <tr>
                                            <th class="colFirst" scope="col">Modifier and Type</th>
                                            <th class="colSecond" scope="col">Method</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        
                                        <tr id="i0" class="altColor">
                                            <td class="colFirst"><code>boolean</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#shouldContinueAfter(io.spine.server.delivery.DeliveryStage)>shouldContinueAfter</a>(DeliveryStage stage) </code>
                                            </th>
                                            <td class="colLast">Determines if the delivery execution should be continued after the given stage is completed.</td>
                                        </tr>
                                        
                                        <tr id="i1" class="rowColor">
                                            <td class="colFirst"><code>void</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#onDeliveryCompleted(io.spine.server.delivery.DeliveryStats)>onDeliveryCompleted</a>(<a href=DeliveryStats.html>DeliveryStats</a> stats) </code>
                                            </th>
                                            <td class="colLast">Called once some delivery process has completed and the corresponding shard has been released.</td>
                                        </tr>
                                        
                                        <tr id="i2" class="altColor">
                                            <td class="colFirst"><code>void</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#onDeliveryStarted(io.spine.server.delivery.ShardIndex)>onDeliveryStarted</a>(ShardIndex index) </code>
                                            </th>
                                            <td class="colLast">Called after the delivery processed has picked up the shard with the specified index and before any of the messages to deliver were read from the storage.</td>
                                        </tr>
                                        
                                        <tr id="i3" class="rowColor">
                                            <td class="colFirst"><code><a href=FailedReception.Action.html>FailedReception.Action</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#onReceptionFailure(io.spine.server.delivery.FailedReception)>onReceptionFailure</a>(<a href=FailedReception.html>FailedReception</a> reception) </code>
                                            </th>
                                            <td class="colLast">A callback invoked if the signal transmitted via given message is handled by the respective receptor with failure.</td>
                                        </tr>
                                        
                                        <tr id="i4" class="altColor">
                                            <td class="colFirst"><code><a href=FailedPickUp.Action.html>FailedPickUp.Action</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#onShardPickUpFailure(io.spine.server.delivery.RuntimeFailure)>onShardPickUpFailure</a>(<a href=RuntimeFailure.html>RuntimeFailure</a> failure) </code>
                                            </th>
                                            <td class="colLast">Called if an <code>Exception</code> occurred when the <code>Delivery</code> attempted to pick up a shard.</td>
                                        </tr>
                                        
                                        <tr id="i5" class="rowColor">
                                            <td class="colFirst"><code><a href=FailedPickUp.Action.html>FailedPickUp.Action</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=DeliveryMonitor.html#onShardAlreadyPicked(io.spine.server.delivery.AlreadyPickedUp)>onShardAlreadyPicked</a>(<a href=AlreadyPickedUp.html>AlreadyPickedUp</a> failure) </code>
                                            </th>
                                            <td class="colLast">Called if <code>Delivery</code> could not pick up a shard because it was already picked up by another worker.</td>
                                        </tr>
                                        
                                        </tbody>
                                    </table>
                                </div>
                                <ul class="blockList">
                                
                                    <li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
                                        <!--   -->
                                    </a>
                                        <h3>Methods inherited from class&nbsp;java.lang.Object</h3>
                                        <code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString,
                                            wait, wait, wait</code></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                </li>
            </ul>
        </div>
        <div class="details">
            <ul class="blockList">
                <li class="blockList">
                    <!-- ========= CONSTRUCTOR DETAIL ======== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.detail">
                                <!--   -->
                            </a>
                                <h3>Constructor Detail</h3>
                                
                                <a name="DeliveryMonitor()"></a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>DeliveryMonitor</h4>
                                        <pre>DeliveryMonitor()</pre>
                                        <div class="block"></div>
                                        
                                    </li>
                                </ul>
                                
                            </li>
                        </ul>
                    </section>
                    
                    <!-- ============ METHOD DETAIL ========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.detail">
                                <!--   -->
                            </a>
                                <h3>Method Detail</h3>
                                
                                <a id="shouldContinueAfter(io.spine.server.delivery.DeliveryStage)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>shouldContinueAfter</h4>
                                        <pre class="methodSignature"> boolean <a href=DeliveryMonitor.html#shouldContinueAfter(io.spine.server.delivery.DeliveryStage)>shouldContinueAfter</a>(DeliveryStage stage)</pre>
                                        <div class="block"><p>Determines if the delivery execution should be continued after the given stage is completed. </p><p>If <code>false</code> is returned, the ongoing delivery run for the served shard will be stopped at this application node. The node will release the previously <a href=ShardedWorkRegistry.html#pickUp(io.spine.server.delivery.ShardIndex,io.spine.server.NodeId)>picked up</a> shard. </p><p>To trigger the new delivery processing for this shard, use <a href=Delivery.html#deliverMessagesFrom(io.spine.server.delivery.ShardIndex)>Delivery.deliverMessagesFrom(ShardIndex)</a>. </p><p>This method is called synchronously, meaning that the delivery process will not resume until a value is returned from this method call.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>stage</code> - the stage of delivery which has ended</dd>
                                            
                                            
                                        

                                        
                                            <dt><span class="returnLabel">Returns:</span></dt>
                                            <dd><p><code>true</code> to continue the delivery, <code>false</code> to stop</p></dd>
                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                                <a id="onDeliveryCompleted(io.spine.server.delivery.DeliveryStats)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>onDeliveryCompleted</h4>
                                        <pre class="methodSignature"> void <a href=DeliveryMonitor.html#onDeliveryCompleted(io.spine.server.delivery.DeliveryStats)>onDeliveryCompleted</a>(<a href=DeliveryStats.html>DeliveryStats</a> stats)</pre>
                                        <div class="block"><p>Called once some delivery process has completed and the corresponding shard has been released. </p><p>The descendants may override this method to understand when it is safe to pick up the corresponding shard again. Another usage scenario is calculation of the message delivery throughput.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>stats</code> - the statistics of the performed delivery</dd>
                                            
                                            
                                        

                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                                <a id="onDeliveryStarted(io.spine.server.delivery.ShardIndex)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>onDeliveryStarted</h4>
                                        <pre class="methodSignature"> void <a href=DeliveryMonitor.html#onDeliveryStarted(io.spine.server.delivery.ShardIndex)>onDeliveryStarted</a>(ShardIndex index)</pre>
                                        <div class="block"><p>Called after the delivery processed has picked up the shard with the specified index and before any of the messages to deliver were read from the storage.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>index</code> - the index of the shard, the delivery from which has been started</dd>
                                            
                                            
                                        

                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                                <a id="onReceptionFailure(io.spine.server.delivery.FailedReception)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>onReceptionFailure</h4>
                                        <pre class="methodSignature"> <a href=FailedReception.Action.html>FailedReception.Action</a> <a href=DeliveryMonitor.html#onReceptionFailure(io.spine.server.delivery.FailedReception)>onReceptionFailure</a>(<a href=FailedReception.html>FailedReception</a> reception)</pre>
                                        <div class="block"><p>A callback invoked if the signal transmitted via given message is handled by the respective receptor with failure. </p><p>Returns an action to take in relation to the failure. </p><p>By default, this callback returns an action which marks the message as <a href=InboxMessageStatus.html#DELIVERED>delivered</a>. </p><p>See <a href=FailedReception.html>FailedReception</a> for more pre-defined actions.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>reception</code> - the details on failed reception</dd>
                                            
                                            
                                        

                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                                <a id="onShardPickUpFailure(io.spine.server.delivery.RuntimeFailure)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>onShardPickUpFailure</h4>
                                        <pre class="methodSignature"> <a href=FailedPickUp.Action.html>FailedPickUp.Action</a> <a href=DeliveryMonitor.html#onShardPickUpFailure(io.spine.server.delivery.RuntimeFailure)>onShardPickUpFailure</a>(<a href=RuntimeFailure.html>RuntimeFailure</a> failure)</pre>
                                        <div class="block"><p>Called if an <code>Exception</code> occurred when the <code>Delivery</code> attempted to pick up a shard. </p><p>Please note, this callback is not invoked in case the shard cannot be picked up if it's already picked up by another worker. It is so, because such a use case is a part of normal flow, and thus does not provoke a <code>RuntimeException</code>. </p><p>Returns an action to take in relation to the failure. </p><p>By default this callback returns an <code>Action</code> that propagates the occurred exception.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>failure</code> - contains an information about the occurred failure, and gives access to predefined <code>Action</code>s to handle the error</dd>
                                            
                                            
                                        

                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                                <a id="onShardAlreadyPicked(io.spine.server.delivery.AlreadyPickedUp)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockListLast"
                                          >
                                    <li class="blockList">
                                        <h4>onShardAlreadyPicked</h4>
                                        <pre class="methodSignature"> <a href=FailedPickUp.Action.html>FailedPickUp.Action</a> <a href=DeliveryMonitor.html#onShardAlreadyPicked(io.spine.server.delivery.AlreadyPickedUp)>onShardAlreadyPicked</a>(<a href=AlreadyPickedUp.html>AlreadyPickedUp</a> failure)</pre>
                                        <div class="block"><p>Called if <code>Delivery</code> could not pick up a shard because it was already picked up by another worker. </p><p>Returns an action to take in relation to the failure. </p><p>By default this callback returns an Action that does nothing. This means that an empty <code>Optional</code> will be returned from the <code>deliverMessagesFrom()</code> method.</p></div>

                                        <dl>

                                        
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>failure</code> - contains an information about the worker who owns the session and gives access to predefined <code>Action</code>s to handle the error</dd>
                                            
                                            
                                        

                                        

                                        

                                        </dl>
                                    </li>
                                </ul>
                                
                            </li>
                        </ul>
                    </section>
                    
                </li>
            </ul>
        </div>
    </div>
</main>
<footer role="contentinfo">
    <nav role="navigation">
        <!-- ======= START OF BOTTOM NAVBAR ====== -->
        <div class="bottomNav"><a id="navbar.bottom">
            <!--   -->
        </a>
            <div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a>
            </div>
            <a id="navbar.bottom.firstrow">
                <!--   -->
            </a>
            <ul class="navList" title="Navigation">
    <li><a href="../../../../index.html">Overview</a></li>
    
    <li><a href="package-summary.html">Package</a></li>
    
    <li class="navBarCell1Rev">Class</li>
    
    <li><a href="package-tree.html">Tree</a></li>
    
    <li><a href="../../../../deprecated.html">Deprecated</a></li>
    <li><a href="../../../../index-files/index-1.html">Index</a></li>
    <li>Help</li>
</ul></div>
        <a id="skip.navbar.bottom">
            <!--   -->
        </a>
        <div class="subNav">
<ul class="navList" id="allclasses_navbar_top" style="display: block;">
    <li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div><!-- ======== END OF BOTTOM NAVBAR ======= -->
    </nav>
</footer><ul class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content" id="ui-id-1" tabindex="0"
    style="display: none;"></ul>
<span role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></span>
</body>
</html>